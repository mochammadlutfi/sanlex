import{s as z,v as W,x as J,y as ce,z as pe,A as fe,B as O,_ as be,C as se,D as _e,F as ke,G as ye,H as ge,J as Ve,K as U,g as I,L as he,M as ae,O as Ee,h as ne,c as T,o as m,d as c,P as V,Q as Ie,u as i,R as E,a as _,w as t,S as $,U as F,j as y,r as le,b as a,V as we,W as Ce,e as P,X as Se,Y as te,$ as Ae,a0 as Te,t as K,i as Ne,f as g,k as Ue,E as Pe,a1 as Be,a2 as Fe,m as $e,I as oe,l as Ke,N as De}from"./app-BGxfkQyo.js";import{c as Re,E as Q}from"./lodash-B8vTn4c7.js";import{_ as L}from"./SelectDaerah-7Ktn776h.js";import{_ as Oe}from"./SelectBranch-CL1YkpOk.js";import{E as Le,a as ze}from"./index-D86IKBYl.js";import{E as Me}from"./index-BJIagJY3.js";import{E as je,a as He}from"./index-CvhItr7_.js";import{E as qe,a as Ge}from"./index-BPi1rbym.js";import{I as X,C as Y,U as Z,E as We}from"./index-D_ov1zZm.js";import{v as Je}from"./directive-Chdceyer.js";import{E as Qe}from"./index-DY15ID-N.js";import{i as Xe}from"./validator-DuQ1bq1g.js";import"./scroll-B9W2qgUL.js";import"./index-CYh1QxFF.js";const Ye=ce({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Xe},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:O},activeActionIcon:{type:O},activeIcon:{type:O},inactiveIcon:{type:O},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:fe(Function)},id:String,tabindex:{type:[String,Number]},...pe(["ariaLabel"])}),Ze={[Z]:f=>z(f)||W(f)||J(f),[Y]:f=>z(f)||W(f)||J(f),[X]:f=>z(f)||W(f)||J(f)},ue="ElSwitch",xe=se({name:ue}),ea=se({...xe,props:Ye,emits:Ze,setup(f,{expose:k,emit:w}){const v=f,{formItem:S}=_e(),s=ke(),d=ye("switch"),{inputId:o}=ge(v,{formItemContext:S}),B=Ve(U(()=>v.loading)),D=I(v.modelValue!==!1),N=I(),M=I(),j=U(()=>[d.b(),d.m(s.value),d.is("disabled",B.value),d.is("checked",r.value)]),H=U(()=>[d.e("label"),d.em("label","left"),d.is("active",!r.value)]),q=U(()=>[d.e("label"),d.em("label","right"),d.is("active",r.value)]),n=U(()=>({width:he(v.width)}));ae(()=>v.modelValue,()=>{D.value=!0});const l=U(()=>D.value?v.modelValue:!1),r=U(()=>l.value===v.activeValue);[v.activeValue,v.inactiveValue].includes(l.value)||(w(Z,v.inactiveValue),w(Y,v.inactiveValue),w(X,v.inactiveValue)),ae(r,e=>{var p;N.value.checked=e,v.validateEvent&&((p=S==null?void 0:S.validate)==null||p.call(S,"change").catch(C=>Ee()))});const A=()=>{const e=r.value?v.inactiveValue:v.activeValue;w(Z,e),w(Y,e),w(X,e),Se(()=>{N.value.checked=r.value})},h=()=>{if(B.value)return;const{beforeChange:e}=v;if(!e){A();return}const p=e();[te(p),z(p)].includes(!0)||Ae(ue,"beforeChange must return type `Promise<boolean>` or `boolean`"),te(p)?p.then(R=>{R&&A()}).catch(R=>{}):p&&A()},b=()=>{var e,p;(p=(e=N.value)==null?void 0:e.focus)==null||p.call(e)};return ne(()=>{N.value.checked=r.value}),k({focus:b,checked:r}),(e,p)=>(m(),T("div",{class:E(i(j)),onClick:P(h,["prevent"])},[c("input",{id:i(o),ref_key:"input",ref:N,class:E(i(d).e("input")),type:"checkbox",role:"switch","aria-checked":i(r),"aria-disabled":i(B),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:i(B),tabindex:e.tabindex,onChange:A,onKeydown:Ie(h,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(m(),T("span",{key:0,class:E(i(H))},[e.inactiveIcon?(m(),_(i(F),{key:0},{default:t(()=>[(m(),_($(e.inactiveIcon)))]),_:1})):V("v-if",!0),!e.inactiveIcon&&e.inactiveText?(m(),T("span",{key:1,"aria-hidden":i(r)},y(e.inactiveText),9,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0),c("span",{ref_key:"core",ref:M,class:E(i(d).e("core")),style:Ce(i(n))},[e.inlinePrompt?(m(),T("div",{key:0,class:E(i(d).e("inner"))},[e.activeIcon||e.inactiveIcon?(m(),_(i(F),{key:0,class:E(i(d).is("icon"))},{default:t(()=>[(m(),_($(i(r)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(m(),T("span",{key:1,class:E(i(d).is("text")),"aria-hidden":!i(r)},y(i(r)?e.activeText:e.inactiveText),11,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0),c("div",{class:E(i(d).e("action"))},[e.loading?(m(),_(i(F),{key:0,class:E(i(d).is("loading"))},{default:t(()=>[a(i(we))]),_:1},8,["class"])):i(r)?le(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?(m(),_(i(F),{key:0},{default:t(()=>[(m(),_($(e.activeActionIcon)))]),_:1})):V("v-if",!0)]):i(r)?V("v-if",!0):le(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?(m(),_(i(F),{key:0},{default:t(()=>[(m(),_($(e.inactiveActionIcon)))]),_:1})):V("v-if",!0)])],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(m(),T("span",{key:1,class:E(i(q))},[e.activeIcon?(m(),_(i(F),{key:0},{default:t(()=>[(m(),_($(e.activeIcon)))]),_:1})):V("v-if",!0),!e.activeIcon&&e.activeText?(m(),T("span",{key:1,"aria-hidden":!i(r)},y(e.activeText),9,["aria-hidden"])):V("v-if",!0)],2)):V("v-if",!0)],10,["onClick"]))}});var aa=be(ea,[["__file","switch.vue"]]);const la=Te(aa),ta={class:"content"},oa={class:"content-header"},sa={class:"mt-auto mb-0"},na={class:"text-lg font-semibold"},ua={class:"mt-auto mb-0"},ia={class:"p-4"},da={class:"flex justify-between items-center mb-4"},ra={class:"flex justify-between mb-2"},ma={class:"flex"},va={class:"flex"},ca={class:"text-end"},Aa={__name:"Form",props:{data:{type:Object,default:null}},setup(f){const k=f,w=I(""),v=I(null),S=I(!1),s=I({id:null,name:null,phone:null,mobile:null,branch_id:null,ref:null,address:[],removeAddress:[]}),d=I(!1),o=I({index:null,id:null,prov:null,kota:null,kec:null,kel:null,postal_code:null,address:null,is_main:!1,lat:null,lng:null}),B=I({name:[{required:!0,message:K("validation.required",{attribute:K("common.name")}),trigger:"blur"}]}),D=()=>{d.value=!0,o.value={index:s.value.address.length,id:null,prov:null,kota:null,kec:null,kel:null,postal_code:null,address:null,is_main:!1,lat:null,lng:null}},N=n=>{d.value=!0,o.value.id=s.value.address[n].id,o.value.index=n,o.value.prov=s.value.address[n].prov,o.value.kota=s.value.address[n].kota,o.value.kec=s.value.address[n].kec,o.value.kel=s.value.address[n].kel,o.value.postal_code=s.value.address[n].postal_code,o.value.address=s.value.address[n].address,o.value.is_main=s.value.address[n].is_main,o.value.lat=s.value.address[n].lat,o.value.lng=s.value.address[n].lng},M=()=>{d.value=!1},j=()=>{s.value.address[o.value.index]={index:o.value.index,id:o.value.id,prov:o.value.prov,kota:o.value.kota,kec:o.value.kec,kel:o.value.kel,postal_code:o.value.postal_code,address:o.value.address,lat:o.value.lat,lng:o.value.lng,is_main:o.value.is_main},d.value=!1},H=n=>{s.value.address[n].id&&s.value.removeAddress.push(s.value.address[n].id),s.value.address.splice(n,1)};ne(()=>{w.value=k.data?"Ubah Customer":"Buat Customer Baru",k.data&&(s.value.id=k.data.id,s.value.name=k.data.name,s.value.phone=k.data.phone,s.value.email=k.data.email,s.value.mobile=k.data.mobile,s.value.branch_id=k.data.branch_id,s.value.ref=k.data.ref,k.data.address&&k.data.address.forEach((n,l)=>{s.value.address.push({index:l,id:n.id,prov:n.provinsi,kota:n.kota,kec:n.kecamatan,kel:n.kelurahan,postal_code:n.pos,address:n.address,is_main:!!n.is_main,lat:n.lat,lng:n.lng})}))});const q=async()=>{v.value&&v.value.validate(async(n,l)=>{if(n){S.value=!0;try{const r=s.value.id?`/customer/${s.value.id}/update`:"/customer/store",A=(s.value.id,"post");(await Ke({method:A,url:r,data:s.value})).status===200&&(De.replace("/customer"),Q({message:K("message.success_save"),type:"success"}))}catch(r){console.log(r),Q({message:K("message.error_server"),type:"error"})}S.value=!1}else console.log(n),console.log(l),Q({message:K("message.error_input"),type:"error"})})};return(n,l)=>{const r=ze,A=Le,h=We,b=He,e=Ge,p=qe,C=Pe,R=Re,x=Me,ee=je,ie=la,de=Qe,re=Ne("base-layout"),me=Je;return m(),_(re,null,{default:t(()=>[c("div",ta,[c("div",oa,[c("div",sa,[c("div",na,y(w.value),1)]),c("div",ua,[a(A,{separator:"/"},{default:t(()=>[a(r,{to:{path:"/dashboard"}},{default:t(()=>[g(y(n.$t("base.dashboard")),1)]),_:1}),a(r,null,{default:t(()=>l[14]||(l[14]=[g("Customer")])),_:1})]),_:1})])]),a(x,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:t(()=>[Ue((m(),_(ee,{model:s.value,ref_key:"formRef",ref:v,rules:B.value,onSubmit:P(q,["prevent"]),"label-position":"top"},{default:t(()=>[c("div",ia,[a(p,{gutter:16},{default:t(()=>[a(e,{md:12},{default:t(()=>[a(b,{label:"Nama",prop:"name"},{default:t(()=>[a(h,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=u=>s.value.name=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"No Handphone",prop:"mobile"},{default:t(()=>[a(h,{modelValue:s.value.mobile,"onUpdate:modelValue":l[1]||(l[1]=u=>s.value.mobile=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Email",prop:"email"},{default:t(()=>[a(h,{modelValue:s.value.email,"onUpdate:modelValue":l[2]||(l[2]=u=>s.value.email=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"No Telepon",prop:"phone"},{default:t(()=>[a(h,{modelValue:s.value.phone,"onUpdate:modelValue":l[3]||(l[3]=u=>s.value.phone=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Cabang",prop:"branch_id"},{default:t(()=>[a(Oe,{modelValue:s.value.branch_id,"onUpdate:modelValue":l[4]||(l[4]=u=>s.value.branch_id=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Orange Ref",prop:"ref"},{default:t(()=>[a(h,{modelValue:s.value.ref,"onUpdate:modelValue":l[5]||(l[5]=u=>s.value.ref=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),c("div",da,[l[16]||(l[16]=c("div",{class:"text-lg font-semibold"},"Alamat Customer",-1)),a(C,{type:"primary",onClick:P(D,["prevent"])},{default:t(()=>l[15]||(l[15]=[g(" Tambah Alamat ")])),_:1})]),a(p,{gutter:12,class:"mb-4"},{default:t(()=>[(m(!0),T(Be,null,Fe(s.value.address,(u,G)=>(m(),_(e,{md:12,key:G},{default:t(()=>[a(x,{class:"mb-4"},{default:t(()=>[c("div",ra,[c("div",null,[g(y(u.address)+" ,"+y(u.postal_code)+" ",1),l[17]||(l[17]=c("br",null,null,-1)),g(" "+y(u.kel.name)+" ,"+y(u.kec.name)+" ,"+y(u.kota.name)+" ,"+y(u.prov.name),1)]),u.is_main?(m(),_(R,{key:0,type:"primary"},{default:t(()=>l[18]||(l[18]=[g("Alamat Utama")])),_:1})):V("",!0)]),c("div",ma,[a(C,{onClick:P(ve=>N(G),["prevent"])},{default:t(()=>l[19]||(l[19]=[g(" Ubah ")])),_:2},1032,["onClick"]),a(C,{type:"danger",onClick:P(ve=>H(G),["prevent"])},{default:t(()=>l[20]||(l[20]=[g(" Hapus ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),c("div",va,[a(C,{tag:i($e),href:"/customer"},{default:t(()=>[a(i(oe),{icon:"mingcute:close-fill",class:"me-2"}),g(" "+y(n.$t("common.cancel")),1)]),_:1},8,["tag"]),a(C,{"native-type":"submit",type:"primary"},{default:t(()=>[a(i(oe),{icon:"mingcute:check-fill",class:"me-2"}),g(" "+y(n.$t("common.save")),1)]),_:1})])])]),_:1},8,["model","rules"])),[[me,S.value]])]),_:1})]),a(de,{id:"modalForm",modelValue:d.value,"onUpdate:modelValue":l[13]||(l[13]=u=>d.value=u),title:"Alamat Customer",class:"!sm:w-full !w-1/2 rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:t(()=>[a(ee,{"label-position":"top",ref_key:"formRef",ref:v,model:o.value,onSubmit:P(j,["prevent"])},{default:t(()=>[a(p,{gutter:16},{default:t(()=>[a(e,{md:12},{default:t(()=>[a(b,{label:"Provinsi",prop:"prov"},{default:t(()=>[a(L,{modelValue:o.value.prov,"onUpdate:modelValue":l[6]||(l[6]=u=>o.value.prov=u),type:"provinsi"},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Kota",prop:"kota"},{default:t(()=>[a(L,{modelValue:o.value.kota,"onUpdate:modelValue":l[7]||(l[7]=u=>o.value.kota=u),type:"kota",hasParent:"",parent:o.value.prov?o.value.prov.id:null},null,8,["modelValue","parent"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Kecamatan",prop:"kec"},{default:t(()=>[a(L,{modelValue:o.value.kec,"onUpdate:modelValue":l[8]||(l[8]=u=>o.value.kec=u),type:"kecamatan",hasParent:"",parent:o.value.kota?o.value.kota.id:null},null,8,["modelValue","parent"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Desa/Kelurahan",prop:"kel"},{default:t(()=>[a(L,{modelValue:o.value.kel,"onUpdate:modelValue":l[9]||(l[9]=u=>o.value.kel=u),type:"kelurahan",hasParent:"",parent:o.value.kec?o.value.kec.id:null},null,8,["modelValue","parent"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Kode POS",prop:"postal_code"},{default:t(()=>[a(h,{modelValue:o.value.postal_code,"onUpdate:modelValue":l[10]||(l[10]=u=>o.value.postal_code=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(e,{md:12},{default:t(()=>[a(b,{label:"Alamat Utama"},{default:t(()=>[a(ie,{modelValue:o.value.is_main,"onUpdate:modelValue":l[11]||(l[11]=u=>o.value.is_main=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(b,{label:"Alamat",prop:"alamat"},{default:t(()=>[a(h,{modelValue:o.value.address,"onUpdate:modelValue":l[12]||(l[12]=u=>o.value.address=u)},null,8,["modelValue"])]),_:1}),c("div",ca,[a(C,{onClick:P(M,["prevent"])},{default:t(()=>l[21]||(l[21]=[g(" Batal ")])),_:1}),a(C,{type:"primary","native-type":"submit"},{default:t(()=>l[22]||(l[22]=[g(" Simpan ")])),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}};export{Aa as default};
