import{g as y,i as K,a as L,o as U,w as t,d as n,b as e,u as a,I as _,E as A,m as E,f as g,j as c,n as F,p as O,q as Q,e as G,t as d,l as C}from"./app-BGxfkQyo.js";import{_ as H,a as J,b as R,E as h}from"./lodash-B8vTn4c7.js";import{u as W,E as X,a as Y,S as Z,b as ee}from"./SkeletonTable-D3dCL_hH.js";import{E as te}from"./index-BJIagJY3.js";import{E as ae}from"./index-D_ov1zZm.js";import{E as oe,a as ne}from"./index-CyV8PQJT.js";import"./scroll-B9W2qgUL.js";import"./index-CYh1QxFF.js";import"./validator-DuQ1bq1g.js";import"./index-BPi1rbym.js";const le={class:"content"},se={class:"flex justify-between items-center p-4"},ce={class:"flex items-center gap-2"},re={class:"flex justify-between items-center p-4"},ie={class:"flex items-center gap-2"},de={class:"flex items-center gap-2"},xe={__name:"Index",setup(me){const r=y({page:1,limit:25,search:""}),k=y([]),x=async({queryKey:o})=>{const[s,p]=o;return(await C.get("/project/contact/data",{params:p})).data},{data:i,isLoading:f,isError:pe,error:ue,refetch:m}=W({queryKey:["projectContactList",r.value],queryFn:x,keepPreviousData:!0}),j=H.debounce(()=>{r.value.page=1,m()},1e3),$=o=>{k.value=o},S=()=>{m()},V=o=>{r.value.page=o,m()},I=o=>{ee.confirm(d("message.delete_confirm"),d("message.delete_confirm_title"),{confirmButtonText:d("common.ok"),cancelButtonText:d("common.cancel"),type:"warning"}).then(()=>{C.delete(`/project/contact/${o}/delete`).then(()=>{m(),h({type:"success",message:d("message.delete_success")})}).catch(s=>{h({type:"error",message:d("message.delete_cancel")})})}).catch(()=>{h({type:"info",message:d("message.delete_cancel")})})};return(o,s)=>{const p=R,b=J,B=ae,v=A,u=ne,w=Q,D=O,T=F,P=oe,q=Y,M=X,N=te,z=K("base-layout");return U(),L(z,null,{default:t(()=>[n("div",le,[s[2]||(s[2]=n("div",{class:"content-header"},[n("div",{class:"mt-auto mb-0"},[n("div",{class:"text-lg font-semibold"},"Kontak")]),n("div",{class:"mt-auto mb-0"})],-1)),e(N,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:t(()=>[n("div",se,[e(b,{modelValue:r.value.limit,"onUpdate:modelValue":s[0]||(s[0]=l=>r.value.limit=l),placeholder:o.$t("common.select"),class:"w-24",onChange:a(m),disable:a(f)},{default:t(()=>[e(p,{label:"25",value:"25"}),e(p,{label:"50",value:"50"}),e(p,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","onChange","disable"]),n("div",ce,[e(B,{modelValue:r.value.search,"onUpdate:modelValue":s[1]||(s[1]=l=>r.value.search=l),clearable:"",onInput:a(j),disable:a(f)},{prefix:t(()=>[e(a(_),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput","disable"]),e(v,{tag:a(E),href:"/project/contact/create",type:"primary"},{default:t(()=>[e(a(_),{icon:"mingcute:add-line",class:"me-2"}),g(" "+c(o.$t("common.create")),1)]),_:1},8,["tag"])])]),e(M,{loading:a(f),animated:""},{template:t(()=>[e(Z)]),default:t(()=>[e(P,{class:"min-w-full",data:a(i).data,onSortChange:S,onSelectionChange:$},{default:t(()=>[e(u,{type:"selection",width:"55"}),e(u,{prop:"name",label:"Nama",width:"200","header-align":"center"}),e(u,{label:"Alamat","header-align":"center"},{default:t(l=>[n("div",null,c(l.row.address),1)]),_:1}),e(u,{prop:"pic",label:"PIC",width:"200","header-align":"center"},{default:t(l=>[n("div",null,c(l.row.pic_name),1),n("div",null,"+"+c(l.row.pic_phone),1)]),_:1}),e(u,{label:o.$t("common.action"),align:"center",width:"150"},{default:t(l=>[e(T,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(D,null,{default:t(()=>[e(w,{class:"flex justify-between"},{default:t(()=>[e(a(E),{href:`/project/contact/${l.row.id}/edit`},{default:t(()=>[e(a(_),{icon:"mingcute:edit-line",class:"me-2"}),g(" "+c(o.$t("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),e(w,{class:"flex justify-between",onClick:G(_e=>I(l.row.id),["prevent"])},{default:t(()=>[e(a(_),{icon:"mingcute:delete-2-line",class:"me-2"}),g(" "+c(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(v,{type:"primary"},{default:t(()=>[g(c(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),n("div",re,[n("div",ie,[n("span",null,c(o.$t("common.table_paginate",{from:a(i).from,to:a(i).to,total:a(i).total})),1)]),n("div",de,[e(q,{class:"float-end",background:"",layout:"prev, pager, next","page-size":a(i).per_page,total:a(i).total,"current-page":a(i).current_page,onCurrentChange:V},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])]),_:1})}}};export{xe as default};
