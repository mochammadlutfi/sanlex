import{g as E,i as K,a as L,o as b,w as o,d as l,b as e,u as t,I as _,E as O,m as k,f as g,j as s,c as C,a1 as Q,n as A,p as G,q as H,e as J,t as m,l as $}from"./app-BGxfkQyo.js";import{_ as R,a as W,b as X,E as h}from"./lodash-B8vTn4c7.js";import{u as Y,E as Z,a as ee,S as ae,b as te}from"./SkeletonTable-D3dCL_hH.js";import{E as oe}from"./index-BJIagJY3.js";import{E as ne}from"./index-D_ov1zZm.js";import{E as le,a as se}from"./index-CyV8PQJT.js";import"./scroll-B9W2qgUL.js";import"./index-CYh1QxFF.js";import"./validator-DuQ1bq1g.js";import"./index-BPi1rbym.js";const re={class:"content"},ce={class:"flex justify-between items-center p-4"},de={class:"flex items-center gap-2"},me={key:1},ie={class:"flex justify-between items-center p-4"},ue={class:"flex items-center gap-2"},pe={class:"flex items-center gap-2"},Ve={__name:"Index",setup(_e){const c=E({page:1,limit:25,search:""}),x=E([]),S=async({queryKey:a})=>{const[r,p]=a;return(await $.get("/customer/data",{params:p})).data},{data:d,isLoading:f,isError:ge,error:fe,refetch:u}=Y({queryKey:["fetchData",c.value],queryFn:S,keepPreviousData:!0}),V=R.debounce(()=>{c.value.page=1,u()},1e3),B=a=>{x.value=a},D=()=>{u()},I=a=>{c.value.page=a,u()},T=a=>{te.confirm(m("message.delete_confirm"),m("message.delete_confirm_title"),{confirmButtonText:m("common.ok"),cancelButtonText:m("common.cancel"),type:"warning"}).then(()=>{$.delete(`/product/customer/${a}/delete`).then(()=>{u(),h({type:"success",message:m("message.delete_success")})}).catch(r=>{h({type:"error",message:m("message.delete_cancel")})})}).catch(()=>{h({type:"info",message:m("message.delete_cancel")})})};return(a,r)=>{const p=X,w=W,j=ne,v=O,i=se,y=H,q=G,M=A,P=le,N=ee,z=Z,F=oe,U=K("base-layout");return b(),L(U,null,{default:o(()=>[l("div",re,[r[2]||(r[2]=l("div",{class:"content-header"},[l("div",{class:"mt-auto mb-0"},[l("div",{class:"text-lg font-semibold"},"Customer")]),l("div",{class:"mt-auto mb-0"})],-1)),e(F,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:o(()=>[l("div",ce,[e(w,{modelValue:c.value.limit,"onUpdate:modelValue":r[0]||(r[0]=n=>c.value.limit=n),placeholder:a.$t("common.select"),class:"w-24",onChange:t(u),disable:t(f)},{default:o(()=>[e(p,{label:"25",value:"25"}),e(p,{label:"50",value:"50"}),e(p,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","onChange","disable"]),l("div",de,[e(j,{modelValue:c.value.search,"onUpdate:modelValue":r[1]||(r[1]=n=>c.value.search=n),clearable:"",onInput:t(V),disable:t(f)},{prefix:o(()=>[e(t(_),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput","disable"]),e(v,{tag:t(k),href:"/customer/create",type:"primary"},{default:o(()=>[e(t(_),{icon:"mingcute:add-line",class:"me-2"}),g(" "+s(a.$t("common.create")),1)]),_:1},8,["tag"])])]),e(z,{loading:t(f),animated:""},{template:o(()=>[e(ae)]),default:o(()=>[e(P,{class:"min-w-full",data:t(d).data,onSortChange:D,onSelectionChange:B},{default:o(()=>[e(i,{type:"selection",width:"55"}),e(i,{prop:"branch.name",label:"Cabang",sortable:""}),e(i,{prop:"name",label:a.$t("common.name"),sortable:""},null,8,["label"]),e(i,{prop:"email",label:a.$t("common.email"),sortable:""},null,8,["label"]),e(i,{label:a.$t("common.address"),width:"300",sortable:""},{default:o(n=>[n.row.address.length?(b(),C(Q,{key:0},[l("div",null,s(n.row.address[0].address)+", "+s(n.row.address[0].pos),1),l("div",null,s(n.row.address[0].kelurahan.name)+", "+s(n.row.address[0].kecamatan.name)+" "+s(n.row.address[0].kota.name)+", "+s(n.row.address[0].provinsi.name),1)],64)):(b(),C("span",me,"-"))]),_:1},8,["label"]),e(i,{label:a.$t("common.action"),align:"center",width:"150"},{default:o(n=>[e(M,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:o(()=>[e(q,null,{default:o(()=>[e(y,{class:"flex justify-between"},{default:o(()=>[e(t(k),{href:`/customer/${n.row.id}/edit`},{default:o(()=>[e(t(_),{icon:"mingcute:edit-line",class:"me-2"}),g(" "+s(a.$t("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),e(y,{class:"flex justify-between",onClick:J(be=>T(n.row.id),["prevent"])},{default:o(()=>[e(t(_),{icon:"mingcute:delete-2-line",class:"me-2"}),g(" "+s(a.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[e(v,{type:"primary"},{default:o(()=>[g(s(a.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),l("div",ie,[l("div",ue,[l("span",null,s(a.$t("common.table_paginate",{from:t(d).from,to:t(d).to,total:t(d).total})),1)]),l("div",pe,[e(N,{class:"float-end",background:"",layout:"prev, pager, next","page-size":t(d).per_page,total:t(d).total,"current-page":t(d).current_page,onCurrentChange:I},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])]),_:1})}}};export{Ve as default};
