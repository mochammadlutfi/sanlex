import{g as E,i as K,a as L,o as O,w as a,d as n,b as e,j as s,f as m,u as o,I as f,E as Q,m as $,n as A,p as G,q as H,e as J,t as r,l as C}from"./app-BGxfkQyo.js";import{_ as R,a as W,b as X,E as h}from"./lodash-B8vTn4c7.js";import{u as Y,E as Z,a as ee,S as te,b as ae}from"./SkeletonTable-D3dCL_hH.js";import{E as oe,a as ne}from"./index-D86IKBYl.js";import{E as se}from"./index-BJIagJY3.js";import{E as le}from"./index-D_ov1zZm.js";import{E as ce,a as re}from"./index-CyV8PQJT.js";import"./scroll-B9W2qgUL.js";import"./index-CYh1QxFF.js";import"./validator-DuQ1bq1g.js";import"./index-BPi1rbym.js";const de={class:"content"},ie={class:"content-header"},me={class:"mt-auto mb-0"},pe={class:"text-lg font-semibold"},ue={class:"mt-auto mb-0"},_e={class:"flex justify-between items-center p-4"},fe={class:"flex items-center gap-2"},be={class:"flex justify-between items-center p-4"},ge={class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},qe={__name:"Index",setup(ve){const l=E({page:1,limit:25,search:""}),k=E([]),B=async({queryKey:t})=>{const[d,u]=t;return(await C.get("/branch/data",{params:u})).data},{data:c,isLoading:b,isError:ye,error:we,refetch:p}=Y({queryKey:["fetchData",l.value],queryFn:B,keepPreviousData:!0}),S=R.debounce(()=>{l.value.page=1,p()},1e3),V=t=>{k.value=t},D=()=>{p()},I=t=>{l.value.page=t,p()},x=t=>{ae.confirm(r("message.delete_confirm"),r("message.delete_confirm_title"),{confirmButtonText:r("common.ok"),cancelButtonText:r("common.cancel"),type:"warning"}).then(()=>{C.delete(`/product/branch/${t}/delete`).then(()=>{p(),h({type:"success",message:r("message.delete_success")})}).catch(d=>{h({type:"error",message:r("message.delete_cancel")})})}).catch(()=>{h({type:"info",message:r("message.delete_cancel")})})};return(t,d)=>{const u=ne,v=oe,g=X,T=W,j=le,y=Q,_=re,w=H,q=G,M=A,P=ce,N=ee,z=Z,U=se,F=K("base-layout");return O(),L(F,null,{default:a(()=>[n("div",de,[n("div",ie,[n("div",me,[n("div",pe,s(t.$t("base.branch")),1)]),n("div",ue,[e(v,{separator:"/"},{default:a(()=>[e(u,{to:{path:"/dashboard"}},{default:a(()=>[m(s(t.$t("base.dashboard")),1)]),_:1}),e(u,null,{default:a(()=>[m(s(t.$t("base.branch")),1)]),_:1})]),_:1})])]),e(U,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:a(()=>[n("div",_e,[e(T,{modelValue:l.value.limit,"onUpdate:modelValue":d[0]||(d[0]=i=>l.value.limit=i),placeholder:t.$t("common.select"),class:"w-24",onChange:o(p),disable:o(b)},{default:a(()=>[e(g,{label:"25",value:"25"}),e(g,{label:"50",value:"50"}),e(g,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","onChange","disable"]),n("div",fe,[e(j,{modelValue:l.value.search,"onUpdate:modelValue":d[1]||(d[1]=i=>l.value.search=i),clearable:"",onInput:o(S),disable:o(b)},{prefix:a(()=>[e(o(f),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput","disable"]),e(y,{tag:o($),href:"/branch/create",type:"primary"},{default:a(()=>[e(o(f),{icon:"mingcute:add-line",class:"me-2"}),m(" "+s(t.$t("common.create")),1)]),_:1},8,["tag"])])]),e(z,{loading:o(b),animated:""},{template:a(()=>[e(te)]),default:a(()=>[e(P,{class:"min-w-full",data:o(c).data,onSortChange:D,onSelectionChange:V},{default:a(()=>[e(_,{type:"selection",width:"55"}),e(_,{prop:"name",label:t.$t("common.name"),sortable:""},null,8,["label"]),e(_,{prop:"address",label:t.$t("common.address"),sortable:""},null,8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:a(i=>[e(M,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(q,null,{default:a(()=>[e(w,{class:"flex justify-between"},{default:a(()=>[e(o($),{href:`/branch/${i.row.id}/edit`},{default:a(()=>[e(o(f),{icon:"mingcute:edit-line",class:"me-2"}),m(" "+s(t.$t("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),e(w,{class:"flex justify-between",onClick:J(Ee=>x(i.row.id),["prevent"])},{default:a(()=>[e(o(f),{icon:"mingcute:delete-2-line",class:"me-2"}),m(" "+s(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(y,{type:"primary"},{default:a(()=>[m(s(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),n("div",be,[n("div",ge,[n("span",null,s(t.$t("common.table_paginate",{from:o(c).from,to:o(c).to,total:o(c).total})),1)]),n("div",he,[e(N,{class:"float-end",background:"",layout:"prev, pager, next","page-size":o(c).per_page,total:o(c).total,"current-page":o(c).current_page,onCurrentChange:I},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])]),_:1})}}};export{qe as default};
