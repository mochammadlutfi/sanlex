import{cq as y,C as G,y as R,G as N,b as U,aB as W,r as C,A,h,ae as K,aA as z,L as Y,ap as V,$,K as j,a4 as q,co as w,M as J,aV as Q,br as Z,bW as g,aU as P}from"./app-BGxfkQyo.js";import{a as F}from"./scroll-B9W2qgUL.js";var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let n=!1,t=!1;return{onClick:o=>{n&&t&&e(o),n=t=!1},onMousedown:o=>{n=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}},oe=R({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:A([String,Array,Object])},zIndex:{type:A([String,Number])}}),ne={click:e=>e instanceof MouseEvent},te="overlay";var se=G({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:n,emit:t}){const s=N(te),u=r=>{t("click",r)},{onClick:d,onMousedown:o,onMouseup:i}=ee(e.customMaskEvent?void 0:u);return()=>e.mask?U("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:o,onMouseup:i},[C(n,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):W("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(n,"default")])}});const ie=se,re=(e,n,t,s)=>{let u={offsetX:0,offsetY:0};const d=a=>{const v=a.clientX,O=a.clientY,{offsetX:E,offsetY:p}=u,c=e.value.getBoundingClientRect(),T=c.left,M=c.top,x=c.width,D=c.height,k=document.documentElement.clientWidth,_=document.documentElement.clientHeight,H=-T+E,B=-M+p,I=k-T-x+E,X=_-M-D+p,S=b=>{let l=E+b.clientX-v,m=p+b.clientY-O;s!=null&&s.value||(l=Math.min(Math.max(l,H),I),m=Math.min(Math.max(m,B),X)),u={offsetX:l,offsetY:m},e.value&&(e.value.style.transform=`translate(${Y(l)}, ${Y(m)})`)},L=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",L)},o=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",d)},i=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",d)},r=()=>{u={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return h(()=>{K(()=>{t.value?o():i()})}),z(()=>{i()}),{resetPosition:r}},ae=(e,n={})=>{V(e)||$("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||N("popup"),s=j(()=>t.bm("parent","hidden"));if(!q||w(document.body,s.value))return;let u=0,d=!1,o="0";const i=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=o,P(document.body,s.value))},200)};J(e,r=>{if(!r){i();return}d=!w(document.body,s.value),d&&(o=document.body.style.width,Q(document.body,s.value)),u=F(t.namespace.value);const a=document.documentElement.clientHeight<document.body.scrollHeight,v=Z(document.body,"overflowY");u>0&&(a||v==="scroll")&&d&&(document.body.style.width=`calc(100% - ${u}px)`)}),g(()=>i())};export{ie as E,ae as a,ee as b,re as u};
