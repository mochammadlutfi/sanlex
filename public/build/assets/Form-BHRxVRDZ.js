import{g as v,t as m,h as R,i as x,a as h,o as U,w as l,d as i,b as e,j as c,f as _,k as S,e as T,E as F,u as N,I as w,l as P,N as j}from"./app-BGxfkQyo.js";import{E as y}from"./lodash-B8vTn4c7.js";import{_ as B}from"./SelectDaerah-7Ktn776h.js";import{E as D,a as A}from"./index-D86IKBYl.js";import{E as O}from"./index-BJIagJY3.js";import{E as z,a as G}from"./index-CvhItr7_.js";import{E as H,a as J}from"./index-BPi1rbym.js";import{E as Q}from"./index-D_ov1zZm.js";import{v as W}from"./directive-Chdceyer.js";import"./scroll-B9W2qgUL.js";const X={class:"content"},Y={class:"content-header"},Z={class:"mt-auto mb-0"},ee={class:"text-lg font-semibold"},ae={class:"mt-auto mb-0"},le={class:"p-4"},te={class:"flex"},ce={__name:"Form",props:{data:{type:Object,default:null}},setup(M){const u=M,k=v(""),b=v(null),g=v(!1),a=v({id:null,name:null,phone:null,province:null,city:null,address:null,postal_code:null,lat:null,lng:null,code:null,key:null,server_link:null}),C=v({name:[{required:!0,message:m("validation.required",{attribute:m("common.name")}),trigger:"blur"}],province:[{required:!0,message:m("validation.required",{attribute:"Provinsi"}),trigger:"change"}],city:[{required:!0,message:m("validation.required",{attribute:"Kota"}),trigger:"change"}]});R(()=>{k.value=u.data?"Ubah Cabang":"Buat Cabang Baru",u.data&&(a.value.id=u.data.id,a.value.name=u.data.name,a.value.province=u.data.province,a.value.city=u.data.city,a.value.address=u.data.address,a.value.lat=u.data.lat,a.value.lng=u.data.lng,a.value.code=u.data.code,a.value.key=u.data.key,a.value.ref=u.data.ref,a.value.server_link=u.data.server)});const L=async()=>{b.value&&b.value.validate(async(r,t)=>{if(r){g.value=!0;try{const p=a.value.id?`/branch/${a.value.id}/update`:"/branch/store",V=(a.value.id,"post");(await P({method:V,url:p,data:a.value})).status===200&&(j.replace("/branch"),y({message:m("message.success_save"),type:"success"}))}catch(p){console.log(p),y({message:m("message.error_server"),type:"error"})}g.value=!1}else console.log(r),console.log(t),y({message:m("message.error_input"),type:"error"})})};return(r,t)=>{const p=A,V=D,d=Q,n=G,s=J,f=H,E=F,q=z,$=O,I=x("base-layout"),K=W;return U(),h(I,null,{default:l(()=>[i("div",X,[i("div",Y,[i("div",Z,[i("div",ee,c(k.value),1)]),i("div",ae,[e(V,{separator:"/"},{default:l(()=>[e(p,{to:{path:"/dashboard"}},{default:l(()=>[_(c(r.$t("base.dashboard")),1)]),_:1}),e(p,null,{default:l(()=>[_(c(r.$t("base.product")),1)]),_:1})]),_:1})])]),e($,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:l(()=>[S((U(),h(q,{model:a.value,ref_key:"formRef",ref:b,rules:C.value,onSubmit:T(L,["prevent"]),"label-position":"top"},{default:l(()=>[i("div",le,[e(f,{gutter:16},{default:l(()=>[e(s,{md:12},{default:l(()=>[e(n,{label:"Nama",prop:"name"},{default:l(()=>[e(d,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.name=o),placeholder:"Masukan Nama Kantor Cabang"},null,8,["modelValue"])]),_:1}),e(n,{label:"No Telepon"},{default:l(()=>[e(d,{modelValue:a.value.phone,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.phone=o),placeholder:"Masukan No Telpon"},null,8,["modelValue"])]),_:1}),e(f,{gutter:16},{default:l(()=>[e(s,{md:12},{default:l(()=>[e(n,{label:"Provinsi",prop:"province"},{default:l(()=>[e(B,{modelValue:a.value.province,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.province=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{md:12},{default:l(()=>[e(n,{label:"Kota",prop:"city"},{default:l(()=>[e(B,{modelValue:a.value.city,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.city=o),type:"kota",hasParent:"",parent:a.value.province?a.value.province.id:null},null,8,["modelValue","parent"])]),_:1})]),_:1})]),_:1}),e(n,{label:"Alamat Lengkap"},{default:l(()=>[e(d,{type:"textarea",row:2,modelValue:a.value.address,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.address=o),placeholder:"Masukan No Telpon"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{md:12},{default:l(()=>[e(f,{gutter:16},{default:l(()=>[e(s,{md:12},{default:l(()=>[e(n,{label:"Latitude"},{default:l(()=>[e(d,{modelValue:a.value.lat,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.lat=o),placeholder:"Masukan Latitude"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{md:12},{default:l(()=>[e(n,{label:"Longtitude"},{default:l(()=>[e(d,{modelValue:a.value.lng,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.lng=o),placeholder:"Masukan Longtitude"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:16},{default:l(()=>[e(s,{md:8},{default:l(()=>[e(n,{label:"Kode"},{default:l(()=>[e(d,{modelValue:a.value.code,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.code=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{md:8},{default:l(()=>[e(n,{label:"Key"},{default:l(()=>[e(d,{modelValue:a.value.key,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.key=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{md:8},{default:l(()=>[e(n,{label:"Ref"},{default:l(()=>[e(d,{modelValue:a.value.ref,"onUpdate:modelValue":t[9]||(t[9]=o=>a.value.ref=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{label:"Server"},{default:l(()=>[e(d,{modelValue:a.value.server_link,"onUpdate:modelValue":t[10]||(t[10]=o=>a.value.server_link=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i("div",te,[e(E,null,{default:l(()=>[e(N(w),{icon:"mingcute:close-fill",class:"me-2"}),_(" "+c(r.$t("common.cancel")),1)]),_:1}),e(E,{"native-type":"submit",type:"primary"},{default:l(()=>[e(N(w),{icon:"mingcute:check-fill",class:"me-2"}),_(" "+c(r.$t("common.save")),1)]),_:1})])])]),_:1},8,["model","rules"])),[[K,g.value]])]),_:1})])]),_:1})}}};export{ce as default};
