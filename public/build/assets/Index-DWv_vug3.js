import{g as S,i as Q,a as w,o as v,w as t,d as l,b as e,j as r,f as c,u as n,I as _,E as W,m as y,n as G,p as J,q as R,e as X,t as u,l as B}from"./app-BGxfkQyo.js";import{_ as Y,a as Z,b as ee,c as te,E}from"./lodash-B8vTn4c7.js";import{u as ae,E as oe,a as ne,S as le,b as se}from"./SkeletonTable-D3dCL_hH.js";import{E as re,a as ce}from"./index-D86IKBYl.js";import{E as ie}from"./index-BJIagJY3.js";import{E as de}from"./index-D_ov1zZm.js";import{E as me,a as ue}from"./index-CyV8PQJT.js";import{E as pe}from"./index-CyDS6CXJ.js";import"./scroll-B9W2qgUL.js";import"./index-CYh1QxFF.js";import"./validator-DuQ1bq1g.js";import"./index-BPi1rbym.js";import"./position-BiuuCdhY.js";const _e={class:"content"},fe={class:"content-header"},ge={class:"mt-auto mb-0"},be={class:"text-lg font-semibold"},he={class:"mt-auto mb-0"},we={class:"flex justify-between items-center p-4"},ve={class:"flex items-center gap-2"},ye={class:"flex"},Ee={class:"text-left"},ke={class:"font-semibold"},$e={class:"flex justify-between items-center p-4"},Ce={class:"flex items-center gap-2"},xe={class:"flex items-center gap-2"},He={__name:"Index",setup(Se){const i=S({page:1,limit:25,search:""}),I=S([]),V=async({queryKey:a})=>{const[s,f]=a;return(await B.get("/product/data",{params:f})).data},{data:d,isLoading:g,isError:Be,error:Ie,refetch:p}=ae({queryKey:["fetchData",i.value],queryFn:V,keepPreviousData:!0}),D=Y.debounce(()=>{i.value.page=1,p()},1e3),j=a=>{I.value=a},T=()=>{p()},q=a=>{i.value.page=a,p()},M=a=>{se.confirm(u("message.delete_confirm"),u("message.delete_confirm_title"),{confirmButtonText:u("common.ok"),cancelButtonText:u("common.cancel"),type:"warning"}).then(()=>{B.delete(`/product/brand/${a}/delete`).then(()=>{p(),E({type:"success",message:u("message.delete_success")})}).catch(s=>{E({type:"error",message:u("message.delete_cancel")})})}).catch(()=>{E({type:"info",message:u("message.delete_cancel")})})};return(a,s)=>{const f=ce,k=re,b=ee,N=Z,P=de,$=W,m=ue,z=pe,C=te,h=R,A=J,K=G,U=me,F=ne,H=oe,L=ie,O=Q("base-layout");return v(),w(O,null,{default:t(()=>[l("div",_e,[l("div",fe,[l("div",ge,[l("div",be,r(a.$t("base.product")),1)]),l("div",he,[e(k,{separator:"/"},{default:t(()=>[e(f,{to:{path:"/dashboard"}},{default:t(()=>[c(r(a.$t("base.dashboard")),1)]),_:1}),e(f,null,{default:t(()=>[c(r(a.$t("base.product")),1)]),_:1})]),_:1})])]),e(L,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:t(()=>[l("div",we,[e(N,{modelValue:i.value.limit,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value.limit=o),placeholder:a.$t("common.select"),class:"w-24",onChange:n(p),disable:n(g)},{default:t(()=>[e(b,{label:"25",value:"25"}),e(b,{label:"50",value:"50"}),e(b,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","onChange","disable"]),l("div",ve,[e(P,{modelValue:i.value.search,"onUpdate:modelValue":s[1]||(s[1]=o=>i.value.search=o),clearable:"",onInput:n(D),disable:n(g)},{prefix:t(()=>[e(n(_),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput","disable"]),e($,{tag:n(y),href:"/product/create",type:"primary"},{default:t(()=>[e(n(_),{icon:"mingcute:add-line",class:"me-2"}),c(" "+r(a.$t("common.create")),1)]),_:1},8,["tag"])])]),e(H,{loading:n(g),animated:""},{template:t(()=>[e(le)]),default:t(()=>[e(U,{class:"min-w-full",data:n(d).data,onSortChange:T,onSelectionChange:j},{default:t(()=>[e(m,{type:"selection",width:"55"}),e(m,{label:a.$t("common.name"),width:"350"},{default:t(o=>[l("div",ye,[e(z,{class:"!w-16 !h-16 rounded-md me-2",src:o.row.image,"preview-src-list":[o.row.image],"initial-index":0,"preview-teleported":""},null,8,["src","preview-src-list"]),l("div",Ee,[l("div",ke,r(o.row.name),1),l("div",null,r(o.row.category.name),1)])])]),_:1},8,["label"]),e(m,{prop:"brand.name",label:a.$t("base.brand"),sortable:""},null,8,["label"]),e(m,{label:"Kemasan",sortable:""},{default:t(o=>[c(r(o.row.packaging.length?o.row.packaging.map(x=>x.name).join(", "):"-"),1)]),_:1}),e(m,{label:"Warna",sortable:""},{default:t(o=>[c(r(o.row.color.length?o.row.color.length:"-"),1)]),_:1}),e(m,{label:"Status",sortable:""},{default:t(o=>[o.row.status==1?(v(),w(C,{key:0,type:"success"},{default:t(()=>s[2]||(s[2]=[c("Aktif")])),_:1})):(v(),w(C,{key:1,type:"error"},{default:t(()=>s[3]||(s[3]=[c("Non Aktif")])),_:1}))]),_:1}),e(m,{label:a.$t("common.action"),align:"center",width:"150"},{default:t(o=>[e(K,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(A,null,{default:t(()=>[e(h,{class:"flex justify-between"},{default:t(()=>[e(n(y),{href:`/product/${o.row.id}/edit`},{default:t(()=>[e(n(_),{icon:"mingcute:edit-line",class:"me-2"}),c(" "+r(a.$t("common.edit")),1)]),_:2},1032,["href"])]),_:2},1024),e(h,{class:"flex justify-between"},{default:t(()=>[e(n(y),{href:`/product/${o.row.id}/price`},{default:t(()=>[e(n(_),{icon:"fluent:money-settings-24-regular",class:"me-2"}),s[4]||(s[4]=c(" Harga "))]),_:2},1032,["href"])]),_:2},1024),e(h,{class:"flex justify-between",onClick:X(x=>M(o.row.id),["prevent"])},{default:t(()=>[e(n(_),{icon:"mingcute:delete-2-line",class:"me-2"}),c(" "+r(a.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e($,{type:"primary"},{default:t(()=>[c(r(a.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),l("div",$e,[l("div",Ce,[l("span",null,r(a.$t("common.table_paginate",{from:n(d).from,to:n(d).to,total:n(d).total})),1)]),l("div",xe,[e(F,{class:"float-end",background:"",layout:"prev, pager, next","page-size":n(d).per_page,total:n(d).total,"current-page":n(d).current_page,onCurrentChange:q},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])]),_:1})}}};export{He as default};
