import{g as c,t as r,h as $,i as F,a as E,o as N,w as l,d as m,b as a,j as v,f,k as K,e as R,E as T,u as M,I as U,l as j,N as S}from"./app-BGxfkQyo.js";import{E as y}from"./lodash-B8vTn4c7.js";import{_ as L}from"./SelectDaerah-7Ktn776h.js";import{E as D,a as H}from"./index-D86IKBYl.js";import{E as A}from"./index-BJIagJY3.js";import{E as O,a as z}from"./index-CvhItr7_.js";import{E as G,a as J}from"./index-BPi1rbym.js";import{E as Q}from"./index-D_ov1zZm.js";import{v as W}from"./directive-Chdceyer.js";import"./scroll-B9W2qgUL.js";const X={class:"content"},Y={class:"content-header"},Z={class:"mt-auto mb-0"},ee={class:"text-lg font-semibold"},ae={class:"mt-auto mb-0"},le={class:"p-4"},oe={class:"flex"},ve={__name:"Form",props:{data:{type:Object,default:null}},setup(w){const u=w,k=c(""),_=c(null),g=c(!1),e=c({id:null,name:null,phone:null,fax:null,email:null,pic_name:null,pic_phone:null,province:null,city:null,address:null,postal_code:null,lat:null,lng:null}),I=c({name:[{required:!0,message:r("validation.required",{attribute:r("common.name")}),trigger:"blur"}],province:[{required:!0,message:r("validation.required",{attribute:"Provinsi"}),trigger:"change"}],city:[{required:!0,message:r("validation.required",{attribute:"Kota"}),trigger:"change"}]});$(()=>{k.value=u.data?"Ubah Kontak":"Buat Kontak Baru",u.data&&(e.value.id=u.data.id,e.value.name=u.data.name,e.value.province=u.data.province,e.value.city=u.data.city,e.value.address=u.data.address,e.value.lat=u.data.lat,e.value.lng=u.data.lng,e.value.code=u.data.code,e.value.key=u.data.key,e.value.ref=u.data.ref,e.value.server_link=u.data.server)});const P=async()=>{_.value&&_.value.validate(async(s,o)=>{if(s){g.value=!0;try{const i=e.value.id?`/branch/${e.value.id}/update`:"/branch/store",b=(e.value.id,"post");(await j({method:b,url:i,data:e.value})).status===200&&(S.replace("/branch"),y({message:r("message.success_save"),type:"success"}))}catch(i){console.log(i),y({message:r("message.error_server"),type:"error"})}g.value=!1}else console.log(s),console.log(o),y({message:r("message.error_input"),type:"error"})})};return(s,o)=>{const i=H,b=D,d=Q,n=z,p=J,V=G,h=T,x=O,B=A,C=F("base-layout"),q=W;return N(),E(C,null,{default:l(()=>[m("div",X,[m("div",Y,[m("div",Z,[m("div",ee,v(k.value),1)]),m("div",ae,[a(b,{separator:"/"},{default:l(()=>[a(i,{to:{path:"/dashboard"}},{default:l(()=>[f(v(s.$t("base.dashboard")),1)]),_:1}),a(i,null,{default:l(()=>[f(v(s.$t("base.product")),1)]),_:1})]),_:1})])]),a(B,{"body-class":"!p-0",class:"!rounded-lg !shadow-md !mb-10"},{default:l(()=>[K((N(),E(x,{model:e.value,ref_key:"formRef",ref:_,rules:I.value,onSubmit:R(P,["prevent"]),"label-position":"top"},{default:l(()=>[m("div",le,[a(V,{gutter:16},{default:l(()=>[a(p,{md:12},{default:l(()=>[a(n,{label:"Nama",prop:"name"},{default:l(()=>[a(d,{modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.name=t),placeholder:"Masukan Nama"},null,8,["modelValue"])]),_:1}),a(n,{label:"No Telepon"},{default:l(()=>[a(d,{modelValue:e.value.phone,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.phone=t),placeholder:"Masukan No Telpon"},null,8,["modelValue"])]),_:1}),a(n,{label:"Fax"},{default:l(()=>[a(d,{modelValue:e.value.fax,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.fax=t),placeholder:"Masukan No Fax"},null,8,["modelValue"])]),_:1}),a(n,{label:"Email"},{default:l(()=>[a(d,{modelValue:e.value.email,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.email=t),placeholder:"Masukan No Email"},null,8,["modelValue"])]),_:1}),a(n,{label:"Nama PIC"},{default:l(()=>[a(d,{modelValue:e.value.pic_name,"onUpdate:modelValue":o[4]||(o[4]=t=>e.value.pic_name=t),placeholder:"Masukan Nama PIC"},null,8,["modelValue"])]),_:1}),a(n,{label:"No HP PIC"},{default:l(()=>[a(d,{modelValue:e.value.pic_phone,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.pic_phone=t),placeholder:"Masukan No HP PIC"},null,8,["modelValue"])]),_:1})]),_:1}),a(p,{md:12},{default:l(()=>[a(V,{gutter:16},{default:l(()=>[a(p,{md:12},{default:l(()=>[a(n,{label:"Provinsi",prop:"province"},{default:l(()=>[a(L,{modelValue:e.value.province,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.province=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(p,{md:12},{default:l(()=>[a(n,{label:"Kota",prop:"city"},{default:l(()=>[a(L,{modelValue:e.value.city,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.city=t),type:"kota",hasParent:"",parent:e.value.province?e.value.province.id:null},null,8,["modelValue","parent"])]),_:1})]),_:1})]),_:1}),a(n,{label:"Alamat Lengkap"},{default:l(()=>[a(d,{type:"textarea",row:2,modelValue:e.value.address,"onUpdate:modelValue":o[8]||(o[8]=t=>e.value.address=t),placeholder:"Masukan No Telpon"},null,8,["modelValue"])]),_:1}),a(n,{label:"Longtitude"},{default:l(()=>[a(d,{modelValue:e.value.lng,"onUpdate:modelValue":o[9]||(o[9]=t=>e.value.lng=t),placeholder:"Masukan Longtitude"},null,8,["modelValue"])]),_:1}),a(V,{gutter:16},{default:l(()=>[a(p,{md:12},{default:l(()=>[a(n,{label:"Latitude"},{default:l(()=>[a(d,{modelValue:e.value.lat,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.lat=t),placeholder:"Masukan Latitude"},null,8,["modelValue"])]),_:1})]),_:1}),a(p,{md:12},{default:l(()=>[a(n,{label:"Longtitude"},{default:l(()=>[a(d,{modelValue:e.value.lng,"onUpdate:modelValue":o[11]||(o[11]=t=>e.value.lng=t),placeholder:"Masukan Longtitude"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),m("div",oe,[a(h,{tag:s.Link,href:"/project/contact"},{default:l(()=>[a(M(U),{icon:"mingcute:close-fill",class:"me-2"}),f(" "+v(s.$t("common.cancel")),1)]),_:1},8,["tag"]),a(h,{"native-type":"submit",type:"primary"},{default:l(()=>[a(M(U),{icon:"mingcute:check-fill",class:"me-2"}),f(" "+v(s.$t("common.save")),1)]),_:1})])])]),_:1},8,["model","rules"])),[[q,g.value]])]),_:1})])]),_:1})}}};export{ve as default};
